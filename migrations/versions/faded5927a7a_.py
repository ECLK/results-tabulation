"""empty message

Revision ID: faded5927a7a
Revises: 9deab81b9486
Create Date: 2019-09-17 11:19:07.050882

"""
from alembic import op
import sqlalchemy as sa

from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.

revision = 'faded5927a7a'
down_revision = '9deab81b9486'
branch_labels = None
depends_on = None


def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.create_table('tallySheetVersionRow_CE_201_PV',
                    sa.Column('tallySheetVersionRowId', sa.Integer(), nullable=False),
                    sa.Column('tallySheetVersionId', sa.Integer(), nullable=True),
                    sa.Column('ballotBoxStationaryItemId', sa.Integer(), nullable=False),
                    sa.Column('numberOfPacketsInserted', sa.Integer(), nullable=False),
                    sa.Column('numberOfAPacketsFound', sa.Integer(), nullable=False),
                    sa.ForeignKeyConstraint(['tallySheetVersionId'], ['tallySheetVersion.tallySheetVersionId'], ),
                    sa.PrimaryKeyConstraint('tallySheetVersionRowId'),
                    sa.UniqueConstraint('tallySheetVersionId', 'ballotBoxStationaryItemId', name='BallotBoxPerCE201PV')
                    )
    op.create_table('tallySheetVersionRow_CE_201_PV_CC',
                    sa.Column('tallySheetVersionRowId', sa.Integer(), nullable=False),
                    sa.Column('tallySheetVersionId', sa.Integer(), nullable=True),
                    sa.Column('countingCentreId', sa.Integer(), nullable=True),
                    sa.Column('situation', sa.String(100), nullable=False),
                    sa.Column('timeOfCommencementOfCount', sa.DateTime(), nullable=False),
                    sa.Column('numberOfAPacketsFound', sa.Integer(), nullable=False),
                    sa.Column('numberOfACoversRejected', sa.Integer(), nullable=False),
                    sa.Column('numberOfBCoversRejected', sa.Integer(), nullable=False),
                    sa.Column('numberOfValidBallotPapers', sa.Integer(), nullable=False),
                    sa.ForeignKeyConstraint(['countingCentreId'], ['area.areaId'], ),
                    sa.ForeignKeyConstraint(['tallySheetVersionId'], ['tallySheetVersion.tallySheetVersionId'], ),
                    sa.PrimaryKeyConstraint('tallySheetVersionRowId'),
                    sa.UniqueConstraint('tallySheetVersionId', 'countingCentreId', name='CountingCenterPerCE201PVCC')
                    )

    op.alter_column('tallySheet', 'tallySheetCode',
                    existing_type=mysql.ENUM('CE_201', 'CE_201_PV', 'PRE_28', 'PRE_41', 'PRE_30_PD', 'PRE_30_ED',
                                             'PRE_21', 'PRE_34_CO', 'PRE_34_I_RO', 'PRE_34_II_RO', 'PRE_34_RO',
                                             'PRE_ALL_ISLAND_RESULTS_BY_ELECTORAL_DISTRICTS', 'PRE_ALL_ISLAND_RESULTS'),
                    nullable=False)

    op.alter_column('tallySheetVersion', 'tallySheetVersionCode',
                    existing_type=mysql.ENUM('CE_201', 'CE_201_PV', 'PRE_28', 'PRE_41', 'PRE_30_PD', 'PRE_30_ED',
                                             'PRE_21', 'PRE_34_CO', 'PRE_34_I_RO', 'PRE_34_II_RO', 'PRE_34_RO',
                                             'PRE_ALL_ISLAND_RESULTS_BY_ELECTORAL_DISTRICTS', 'PRE_ALL_ISLAND_RESULTS'),
                    nullable=False)

    ### end Alembic commands ###


def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('tallySheetVersionRow_CE_201_PV_CC')
    op.drop_table('tallySheetVersionRow_CE_201_PV')

    op.alter_column('tallySheet', 'tallySheetCode',
                    existing_type=mysql.ENUM('CE_201', 'PRE_28', 'PRE_41', 'PRE_30_PD', 'PRE_30_ED', 'PRE_21',
                                             'PRE_34_CO', 'PRE_34_I_RO', 'PRE_34_II_RO', 'PRE_34_RO',
                                             'PRE_ALL_ISLAND_RESULTS_BY_ELECTORAL_DISTRICTS', 'PRE_ALL_ISLAND_RESULTS'),
                    nullable=False)

    op.alter_column('tallySheetVersion', 'tallySheetVersionCode',
                    existing_type=mysql.ENUM('CE_201', 'PRE_28', 'PRE_41', 'PRE_30_PD', 'PRE_30_ED', 'PRE_21',
                                             'PRE_34_CO', 'PRE_34_I_RO', 'PRE_34_II_RO', 'PRE_34_RO',
                                             'PRE_ALL_ISLAND_RESULTS_BY_ELECTORAL_DISTRICTS', 'PRE_ALL_ISLAND_RESULTS'),
                    nullable=False)

    ### end Alembic commands ###
